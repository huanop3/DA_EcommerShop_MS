@page "/products"

<PageTitle>All Products - TechWorld</PageTitle>

<link href="css/products.css" rel="stylesheet" />
<div class="container">
    <div >
        <div class="row">
            <!-- Sidebar Filters -->
            <div class="col-lg-3 mb-4">
                <div class="sidebar-container">
                    <div class="category-header">
                        <h2>All Products</h2>
                        <div class="breadcrumb-nav">
                            <a href="/">Home</a>
                            <span class="separator">/</span>
                            <span class="current">Products</span>
                        </div>
                    </div>

                    <div class="filters-sidebar">
                        <div class="filter-section">
                            <h4>Categories</h4>
                            <div class="filter-list">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="all-products" checked>
                                    <label class="form-check-label" for="all-products">
                                        All Products
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="laptops">
                                    <label class="form-check-label" for="laptops">
                                        Laptops
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="computers">
                                    <label class="form-check-label" for="computers">
                                        Computers
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="smartphones">
                                    <label class="form-check-label" for="smartphones">
                                        Smartphones
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="headphones">
                                    <label class="form-check-label" for="headphones">
                                        Headphones
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="tablets">
                                    <label class="form-check-label" for="tablets">
                                        Tablets
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="smartwatches">
                                    <label class="form-check-label" for="smartwatches">
                                        Smartwatches
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="filter-section">
                            <h4>Brands</h4>
                            <div class="filter-list">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="apple">
                                    <label class="form-check-label" for="apple">
                                        Apple
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="samsung">
                                    <label class="form-check-label" for="samsung">
                                        Samsung
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="dell">
                                    <label class="form-check-label" for="dell">
                                        Dell
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="hp">
                                    <label class="form-check-label" for="hp">
                                        HP
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="sony">
                                    <label class="form-check-label" for="sony">
                                        Sony
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="lenovo">
                                    <label class="form-check-label" for="lenovo">
                                        Lenovo
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="filter-section">
                            <h4>Price Range</h4>
                            <div class="price-range">
                                <div class="pure-dropdown">
                                    <div class="dropdown-header" @onclick="TogglePriceDropdown">
                                        <span>@(string.IsNullOrEmpty(SelectedPriceRange) ? "Select Price Range" : PriceRangeOptions.FirstOrDefault(p => p.Value == SelectedPriceRange)?.Label)</span>
                                        <i class="dropdown-arrow"></i>
                                    </div>
                                    <div class="dropdown-list-container @(IsPriceDropdownOpen ? "open" : "")">
                                        <ul class="dropdown-list">
                                            @foreach (var priceOption in PriceRangeOptions)
                                            {
                                                <li class="dropdown-item @(priceOption.Value == SelectedPriceRange ? "selected" : "")" 
                                                    @onclick="() => SelectPriceRange(priceOption.Value)">
                                                    <span>@priceOption.Label</span>
                                                    @if (priceOption.Value == SelectedPriceRange)
                                                    {
                                                        <span class="checkmark">✓</span>
                                                    }
                                                </li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="filter-section">
                            <h4>Rating</h4>
                            <div class="rating-filter">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="rating-5">
                                    <label class="form-check-label" for="rating-5">
                                        <div class="rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="rating-4">
                                    <label class="form-check-label" for="rating-4">
                                        <div class="rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-o"></i>
                                            <span>& up</span>
                                        </div>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="rating-3">
                                    <label class="form-check-label" for="rating-3">
                                        <div class="rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <span>& up</span>
                                        </div>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="rating-2">
                                    <label class="form-check-label" for="rating-2">
                                        <div class="rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <span>& up</span>
                                        </div>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="rating-1">
                                    <label class="form-check-label" for="rating-1">
                                        <div class="rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <span>& up</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="filter-section">
                            <h4>Availability</h4>
                            <div class="filter-list">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="in-stock" checked>
                                    <label class="form-check-label" for="in-stock">
                                        In Stock
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="out-of-stock">
                                    <label class="form-check-label" for="out-of-stock">
                                        Out of Stock
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="filter-buttons">
                            <button class="btn btn-primary w-100 mb-2">Apply Filters</button>
                            <button class="btn btn-outline-secondary w-100">Reset Filters</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Grid -->
            <div class="col-lg-9">
                <!-- Products Sorting and View Options -->
                <div class="products-header">
                    <div class="results-count">
                        <p class="mb-0">Showing 1-12 of 36 products</p>
                    </div>
                    <div class="sorting-options">
                        <div class="me-3">
                            <div class="pure-dropdown">
                                <div class="dropdown-header" @onclick="ToggleSortDropdown">
                                    <span>@(string.IsNullOrEmpty(SelectedSort) ? "Sort by: Featured" : SortOptions.FirstOrDefault(s => s.Value == SelectedSort)?.Label)</span>
                                    <i class="dropdown-arrow"></i>
                                </div>
                                <div class="dropdown-list-container @(IsSortDropdownOpen ? "open" : "")">
                                    <ul class="dropdown-list">
                                        @foreach (var sortOption in SortOptions)
                                        {
                                            <li class="dropdown-item @(sortOption.Value == SelectedSort ? "selected" : "")" 
                                                @onclick="() => SelectSortOption(sortOption.Value)">
                                                <span>@sortOption.Label</span>
                                                @if (sortOption.Value == SelectedSort)
                                                {
                                                    <span class="checkmark">✓</span>
                                                }
                                            </li>
                                        }
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="view-options">
                            <button class="btn btn-outline-secondary active"><i class="fa fa-th"></i></button>
                            <button class="btn btn-outline-secondary"><i class="fa fa-list"></i></button>
                        </div>
                    </div>
                </div>

                <div class="row product-grid">
                    <!-- Product 1 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-badge">Sale</div>
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/laptop-1.jpg" alt="MacBook Pro">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Laptop</div>
                                <h5 class="product-title">MacBook Pro M2</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-half"></i>
                                    <span>(4.5)</span>
                                </div>
                                <div class="product-price">
                                    <span class="old-price">$2,199.00</span>
                                    <span class="current-price">$1,999.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 2 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-badge bg-success">New</div>
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/smartphone-1.jpg" alt="iPhone 14 Pro">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Smartphone</div>
                                <h5 class="product-title">iPhone 14 Pro</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <span>(5.0)</span>
                                </div>
                                <div class="product-price">
                                    <span class="current-price">$999.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 3 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/headphone-1.jpg" alt="Sony WH-1000XM5">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Headphone</div>
                                <h5 class="product-title">Sony WH-1000XM5</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-half"></i>
                                    <span>(4.7)</span>
                                </div>
                                <div class="product-price">
                                    <span class="current-price">$349.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 4 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-badge bg-warning">Hot</div>
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/smartwatch-1.jpg" alt="Apple Watch Series 7">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Smartwatch</div>
                                <h5 class="product-title">Apple Watch Series 7</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <span>(4.9)</span>
                                </div>
                                <div class="product-price">
                                    <span class="old-price">$399.00</span>
                                    <span class="current-price">$349.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 5 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-badge bg-success">New</div>
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/tablet-1.jpg" alt="iPad Pro">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Tablet</div>
                                <h5 class="product-title">iPad Pro M2</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <span>(5.0)</span>
                                </div>
                                <div class="product-price">
                                    <span class="current-price">$799.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 6 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-badge bg-success">New</div>
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/computer-1.jpg" alt="Dell XPS Desktop">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Computer</div>
                                <h5 class="product-title">Dell XPS Desktop</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-half"></i>
                                    <span>(4.6)</span>
                                </div>
                                <div class="product-price">
                                    <span class="current-price">$1,199.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 7 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-badge bg-success">New</div>
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/smartphone-2.jpg" alt="Samsung Galaxy S23">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Smartphone</div>
                                <h5 class="product-title">Samsung Galaxy S23</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <span>(4.9)</span>
                                </div>
                                <div class="product-price">
                                    <span class="current-price">$899.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 8 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-badge bg-success">New</div>
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/smartwatch-2.jpg" alt="Samsung Galaxy Watch 5">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Smartwatch</div>
                                <h5 class="product-title">Galaxy Watch 5</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-half"></i>
                                    <span>(4.5)</span>
                                </div>
                                <div class="product-price">
                                    <span class="current-price">$279.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product 9 -->
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="product-card">
                            <div class="product-wishlist">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="product-img">
                                <img src="images/products/laptop-2.jpg" alt="Dell XPS 13">
                            </div>
                            <div class="product-details">
                                <div class="product-category">Laptop</div>
                                <h5 class="product-title">Dell XPS 13</h5>
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <span>(4.0)</span>
                                </div>
                                <div class="product-price">
                                    <span class="current-price">$1,299.00</span>
                                </div>
                                <button class="btn btn-primary btn-add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination-container">
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    // Add these properties to manage the sort dropdown state
    private bool IsSortDropdownOpen { get; set; } = false;
    private string SelectedSort { get; set; } = "featured";
    
    // Add these properties to manage the price range dropdown state
    private bool IsPriceDropdownOpen { get; set; } = false;
    private string SelectedPriceRange { get; set; } = "";

    // Define sort options
    private List<SortOption> SortOptions = new List<SortOption>
    {
        new SortOption { Value = "featured", Label = "Sort by: Featured" },
        new SortOption { Value = "price-low", Label = "Price: Low to High" },
        new SortOption { Value = "price-high", Label = "Price: High to Low" },
        new SortOption { Value = "newest", Label = "Newest" },
        new SortOption { Value = "rating", Label = "Rating" }
    };
    
    // Define price range options in VND
    private List<SortOption> PriceRangeOptions = new List<SortOption>
    {
        new SortOption { Value = "all", Label = "All Prices" },
        new SortOption { Value = "0-5", Label = "Under 5 million VND" },
        new SortOption { Value = "5-10", Label = "5 - 10 million VND" },
        new SortOption { Value = "10-15", Label = "10 - 15 million VND" },
        new SortOption { Value = "15-20", Label = "15 - 20 million VND" },
        new SortOption { Value = "20-30", Label = "20 - 30 million VND" },
        new SortOption { Value = "30-50", Label = "30 - 50 million VND" },
        new SortOption { Value = "50-70", Label = "50 - 70 million VND" },
        new SortOption { Value = "70-100", Label = "70 - 100 million VND" },
        new SortOption { Value = "100+", Label = "Over 100 million VND" }
    };

    private void ToggleSortDropdown()
    {
        IsSortDropdownOpen = !IsSortDropdownOpen;
        if (IsSortDropdownOpen) IsPriceDropdownOpen = false;
    }
    
    private void TogglePriceDropdown()
    {
        IsPriceDropdownOpen = !IsPriceDropdownOpen;
        if (IsPriceDropdownOpen) IsSortDropdownOpen = false;
    }

    private void SelectSortOption(string value)
    {
        SelectedSort = value;
        IsSortDropdownOpen = false;
        // Here you would implement actual sorting logic
        StateHasChanged();
    }
    
    private void SelectPriceRange(string value)
    {
        SelectedPriceRange = value;
        IsPriceDropdownOpen = false;
        // Here you would implement actual price filtering logic
        StateHasChanged();
    }

    private class SortOption
    {
        public string Value { get; set; }
        public string Label { get; set; }
    }
}
